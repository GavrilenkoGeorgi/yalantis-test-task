(this["webpackJsonpyalantis-test-task"]=this["webpackJsonpyalantis-test-task"]||[]).push([[0],{51:function(e,t,r){},70:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),c=r.n(a),s=r(19),o=r.n(s),i=r(10),l=r(13),u=r(37),p=r(38),m=r(11),j=r.n(m),b=r(16),f=r(5),h=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"SET_EMPLOYEES_ARRAY",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{employees:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EMPLOYEES_ARRAY":return Object(f.a)(Object(f.a)({},e),{},{employees:t.data});case"CHECK_EMPLOYEE":var r=t.data,n=e.employees.find((function(e){return e.groupName===r.groupName})),a=n.employees,c=a.map((function(e){return e.id!==r.id?e:Object(f.a)(Object(f.a)({},e),{},{checked:!e.checked})}));return Object(f.a)(Object(f.a)({},e),{},{employees:e.employees.map((function(e){return e.groupName!==r.groupName?e:Object(f.a)(Object(f.a)({},e),{},{employees:c})}))});default:return e}},d=Object(l.createStore)(y,Object(p.composeWithDevTools)(Object(l.applyMiddleware)(u.a))),O=(r(51),r(14)),g=r(3),x=r(17),v=r(39),w=r.n(v),N={getAllEmployees:function(){var e=Object(b.a)(j.a.mark((function e(){var t,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://yalantis-react-school-api.yalantis.com/api/task0/users");case 3:return t=e.sent,r=t.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?(n=e.t0.response,console.error("Error getting data from API: ".concat(n.status," - ").concat(n.statusText," "))):console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},E=function(e){return window.localStorage.setItem("storedEmployees",JSON.stringify(e))},k=function(e){var t=JSON.parse(window.localStorage.getItem("storedEmployees"));return t?t[e]:""},A=function(e){var t=JSON.parse(window.localStorage.getItem("storedEmployees"));window.localStorage.setItem("storedEmployees",JSON.stringify(Object(f.a)(Object(f.a)({},t),{},{employees:e})))},S=r(18),C=["January","February","March","April","May","June","July","August","September","October","November","December"],D=function(e,t){if("string"!==typeof e)throw new Error("Can't sort, property name is missing.");if(!t||!Array.isArray(t))throw new Error("Can't sort, array of objects is missing.");return t.sort((function(t,r){return t[e]<r[e]?-1:t[e]>r[e]?1:0}))},J=function(e){if(!e||"number"!==typeof e||!isFinite(e))throw new Error('"Days" arg must be a finite number.');return Date.now()+864e5*e},M=function(e){if(!e.length)throw new Error("String must be at least 1 char long.");return e[0]},Y=function(e){var t=new Date(e);if(!t)throw new Error("Date string must be in ISO format.");return C[t.getMonth()]},F=function(e,t){var r=function(e){if(!["lastName","dob"].includes(e))throw new Error("Can't group by ".concat(e));return"lastName"===e?M:Y}(e);if(!t||!Array.isArray(t))throw new Error("Can't group by prop, array of objects is missing.");var n=t.reduce((function(t,n){try{var a=r(n[e]);return t[a]?t[a].employees.push(n):t[a]={groupName:a,employees:[n]},t}catch(c){!function(e){console.error(e.message)}(c)}}),{});return Object.values(n)},I=r(40),_=function(e){var t=e.label,r=Object(I.a)(e,["label"]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",Object(f.a)({type:"checkbox"},r)),Object(n.jsx)("label",{htmlFor:r.id,children:t})]})},P=function(e){var t=e.groupName,r=e.list,a=Object(i.b)(),c=function(e,t){a(function(e,t){return function(){var r=Object(b.a)(j.a.mark((function r(n){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n({type:"CHECK_EMPLOYEE",data:{groupName:e,id:t}});case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(e,t))};return Object(n.jsxs)("div",{className:"employees-by-letter",children:[Object(n.jsx)("h2",{children:t}),Object(n.jsx)("ul",{className:"employee-list",children:r.length?r.map((function(e){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{className:"employee-name",children:[e.lastName," ",e.firstName]}),Object(n.jsx)("span",{className:"checkbox-container",children:Object(n.jsx)(_,{id:e.id,name:e.id,checked:e.checked,label:e.checked?"checked":"","aria-label":"check-employee-".concat(e.lastName),onChange:function(){return c(t,e.id)}})})]},e.id)})):Object(n.jsx)(n.Fragment,{children:"-----"})})]})},R=function(e){var t=e.groups;return Object(n.jsxs)("section",{className:"employees-section",children:[Object(n.jsx)("h1",{children:"Employees"}),Object(n.jsx)("div",{className:"employees-list",children:t&&t.map((function(e){return Object(n.jsx)(P,{groupName:e.groupName,list:e.employees},e.groupName)}))})]})},L=function(){var e=Object(i.c)((function(e){return e.employees})),t=Object(a.useState)([]),r=Object(x.a)(t,2),c=r[0],s=r[1],o=Object(a.useState)([]),l=Object(x.a)(o,2),u=l[0],p=l[1];Object(a.useEffect)((function(){e&&s(function(e){if(!e||!Array.isArray(e))throw new Error("Can't select checked employees, array of employee objects is missing.");var t,r=[],n=Object(S.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.employees.length){var c,s=Object(S.a)(a.employees);try{for(s.s();!(c=s.n()).done;){var o=c.value;o.checked&&r.push(o)}}catch(i){s.e(i)}finally{s.f()}}}}catch(i){n.e(i)}finally{n.f()}return r}(e))}),[e]),Object(a.useEffect)((function(){if(c.length){var e=F("dob",c);p(function(e){if(!e||!Array.isArray(e))throw new Error("Can't sort, array of objects is missing.");return e.sort((function(e,t){return C.indexOf(e.groupName)-C.indexOf(t.groupName)}))}(e))}else p([])}),[c]);var m=function(e){var t=new Date(Date.parse(e)),r=t.getDate(),a=Y(t),c=t.getFullYear();return Object(n.jsxs)("span",{children:[r," ",a,", ",c," year"]})};return Object(n.jsxs)("section",{className:"birthdays-section",children:[Object(n.jsx)("h1",{children:"Employees birthday"}),Object(n.jsx)("div",{className:"birthdays-list",children:u.length?u.map((function(e){return Object(n.jsxs)("div",{className:"month-group",children:[Object(n.jsx)("h2",{children:e.groupName}),Object(n.jsx)("ul",{children:e.employees.map((function(e){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{className:"employee-birthday-name",children:[e.lastName," ",e.firstName," -"," "]}),m(e.dob)]},e.id)}))})]},e.groupName)})):Object(n.jsx)("p",{className:"no-emps-to-show-message",children:"No selected employees"})})]})},T=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.employees})),r=Object(a.useState)(null),c=Object(x.a)(r,2),s=c[0],o=c[1],l=Object(a.useCallback)((function(e){var t=function(e){if(!e||!Array.isArray(e))throw new Error("Can't add checkboxes, array of employee objects is missing.");var t,r=Object(S.a)(e);try{for(r.s();!(t=r.n()).done;)t.value.checked=!1}catch(n){r.e(n)}finally{r.f()}return e}(e),r=D("lastName",t),n=F("lastName",r),a=function(e){if(!e||!Array.isArray(e))throw new Error("Can't select missing groups, array of groups is missing.");var t,r="a b c d e f g h i j k l m n o p q r s t u v w x y z".toUpperCase().split(" "),n=[],a=Object(S.a)(r);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(e.map((function(e){return e.groupName})).indexOf(c)<0){var s={groupName:c,employees:[]};n.push(s)}}}catch(o){a.e(o)}finally{a.f()}return n}(n);return D("groupName",n.concat(a))}),[]);return Object(a.useEffect)((function(){var t=k("expirationDate");if(!t||Date.now()>t)N.getAllEmployees().then((function(t){var r=l(t);e(h(r)),E({employees:r,expirationDate:J(7)})})).catch((function(e){console.error(e)}));else{var r=k("employees");e(h(r))}}),[e,l]),Object(a.useEffect)((function(){o(t),A(t)}),[t]),Object(n.jsx)("section",{className:"employees-section-layout",children:t&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(R,{groups:s}),Object(n.jsx)(L,{})]})})},H=function(){return Object(n.jsxs)("section",{className:"home-container",children:[Object(n.jsx)("h1",{children:"\u0422\u0435\u0441\u0442\u043e\u0432\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0434\u043b\u044f Yalantis React.js School (online)"}),Object(n.jsxs)("article",{className:"greeting",children:[Object(n.jsx)(O.b,{to:"/employees",children:"Employees page"}),Object(n.jsxs)("p",{children:["(\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043f\u0456\u0432\u0440\u043e\u0431\u0456\u0442\u043d\u0438\u043a\u0456\u0432 \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u043f\u0440\u0438 \u043f\u043e\u0442\u0440\u0430\u043f\u043b\u044f\u043d\u043d\u0456 \u043d\u0430 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 ",Object(n.jsx)(O.b,{to:"/employees",children:"employees"}),")"]})]})]})},K=function(){return Object(n.jsxs)(g.c,{children:[Object(n.jsx)(g.a,{exact:!0,path:"/",component:H}),Object(n.jsx)(g.a,{exact:!0,path:"/employees",component:T})]})};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(O.a,{basename:"/yalantis-test-task",children:Object(n.jsx)(i.a,{store:d,children:Object(n.jsx)(K,{})})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.96586225.chunk.js.map