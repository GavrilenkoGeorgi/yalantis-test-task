(this["webpackJsonpyalantis-test-task"]=this["webpackJsonpyalantis-test-task"]||[]).push([[0],{51:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),s=n(19),l=n.n(s),o=n(10),i=n(13),u=n(37),j=n(38),b=n(11),p=n.n(b),d=n(16),f=n(5),h=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_EMPLOYEES_ARRAY",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{employees:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EMPLOYEES_ARRAY":return Object(f.a)(Object(f.a)({},e),{},{employees:t.data});case"CHECK_EMPLOYEE":var n=t.data,c=e.employees.find((function(e){return e.letter===n.letter})),r=c.employees,a=r.map((function(e){return e.id!==n.id?e:Object(f.a)(Object(f.a)({},e),{},{checked:!e.checked})}));return Object(f.a)(Object(f.a)({},e),{},{employees:e.employees.map((function(e){return e.letter!==n.letter?e:Object(f.a)(Object(f.a)({},e),{},{employees:a})}))});default:return e}},O=Object(i.createStore)(m,Object(j.composeWithDevTools)(Object(i.applyMiddleware)(u.a))),y=(n(51),n(17)),x=n(3),v=function(){return Object(c.jsxs)("section",{className:"home-container",children:[Object(c.jsx)("h1",{children:"\u0422\u0435\u0441\u0442\u043e\u0432\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u0434\u043b\u044f Yalantis React.js School (online)"}),Object(c.jsxs)("article",{className:"greeting",children:[Object(c.jsx)(y.b,{to:"/employees",children:"Employees page"}),Object(c.jsxs)("p",{children:["(\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043f\u0456\u0432\u0440\u043e\u0431\u0456\u0442\u043d\u0438\u043a\u0456\u0432 \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u043f\u0440\u0438 \u043f\u043e\u0442\u0440\u0430\u043f\u043b\u044f\u043d\u043d\u0456 \u043d\u0430 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 ",Object(c.jsx)(y.b,{to:"/employees",children:"employees"}),")"]})]})]})},g=n(18),E=n(39),w=n.n(E),N={getAllEmployees:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://yalantis-react-school-api.yalantis.com/api/task0/users");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},k=function(e){return window.localStorage.setItem("storedEmployees",JSON.stringify(e))},S=function(e){var t=JSON.parse(window.localStorage.getItem("storedEmployees"));return t?t[e]:""},D=function(e){var t=JSON.parse(window.localStorage.getItem("storedEmployees"));window.localStorage.setItem("storedEmployees",JSON.stringify(Object(f.a)(Object(f.a)({},t),{},{employees:e})))},J=n(14),M=["January","February","March","April","May","June","July","August","September","October","November","December"],A=function(e,t){return t.sort((function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0}))},F=function(e){var t=new Date(e);return M[t.getMonth()]},Y=n(40),C=function(e){var t=e.label,n=Object(Y.a)(e,["label"]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("input",Object(f.a)({type:"checkbox"},n)),Object(c.jsx)("label",{htmlFor:n.id,children:t})]})},_=function(e){var t=e.letter,n=e.list,r=Object(o.b)(),a=function(e,t){r(function(e,t){return function(){var n=Object(d.a)(p.a.mark((function n(c){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:"CHECK_EMPLOYEE",data:{letter:e,id:t}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e,t))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"employees-by-letter",children:[Object(c.jsx)("h2",{children:t}),Object(c.jsx)("ul",{className:"employee-list",children:n.length?n.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsxs)("span",{className:"employee-name",children:[e.lastName," ",e.firstName]}),Object(c.jsx)("span",{className:"checkbox-container",children:Object(c.jsx)(C,{id:e.id,name:e.id,checked:e.checked,label:e.checked?"checked":"","aria-label":"check-employee-".concat(e.lastName),onChange:function(){return a(t,e.id)}})})]},e.id)})):Object(c.jsx)(c.Fragment,{children:"-----"})})]})})},I=function(e){var t=e.groups;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("section",{className:"employees-section",children:[Object(c.jsx)("h1",{children:"Employees"}),t&&t.map((function(e){return Object(c.jsx)(_,{letter:e.letter,list:e.employees},e.letter)}))]})})},R=function(){var e=Object(o.c)((function(e){return e.employees})),t=Object(r.useState)([]),n=Object(g.a)(t,2),a=n[0],s=n[1],l=Object(r.useState)([]),i=Object(g.a)(l,2),u=i[0],j=i[1];Object(r.useEffect)((function(){e&&s(function(e){var t,n=[],c=Object(J.a)(e);try{for(c.s();!(t=c.n()).done;){var r=t.value;if(r.employees.length){var a,s=Object(J.a)(r.employees);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.checked&&n.push(l)}}catch(o){s.e(o)}finally{s.f()}}}}catch(o){c.e(o)}finally{c.f()}return n}(e))}),[e]),Object(r.useEffect)((function(){if(a.length){var e=function(e){var t=e.reduce((function(e,t){var n=F(t.dob);return e[n]?e[n].employees.push(t):e[n]={month:n,employees:[t]},e}),{});return Object.values(t)}(a);j(e.sort((function(e,t){return M.indexOf(e.month)-M.indexOf(t.month)})))}else j([])}),[a]);var b=function(e){var t=new Date(Date.parse(e)),n=t.getDate(),r=F(t),a=t.getFullYear();return Object(c.jsxs)("span",{children:[n," ",r,", ",a," year"]})};return Object(c.jsxs)("section",{className:"birthdays-section",children:[Object(c.jsx)("h1",{children:"Employees birthday"}),u.length?u.map((function(e){return Object(c.jsxs)("div",{className:"month-group",children:[Object(c.jsx)("h2",{children:e.month}),Object(c.jsx)("ul",{children:e.employees.map((function(e){return Object(c.jsxs)("li",{children:[e.lastName," ",e.firstName," ","- ",b(e.dob)]},e.id)}))})]},e.month)})):Object(c.jsx)("span",{children:"No selected employees"})]})},L=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.employees})),n=Object(r.useState)(null),a=Object(g.a)(n,2),s=a[0],l=a[1],i=Object(r.useCallback)((function(e){var t=function(e){var t=e.reduce((function(e,t){var n=t.lastName[0];return e[n]?e[n].employees.push(t):e[n]={letter:n,employees:[t]},e}),{});return Object.values(t)}(A("lastName",e)),n=function(e){var t,n="a b c d e f g h i j k l m n o p q r s t u v w x y z".toUpperCase().split(" "),c=[],r=Object(J.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(e.map((function(e){return e.letter})).indexOf(a)<0){var s={letter:a,employees:[]};c.push(s)}}}catch(l){r.e(l)}finally{r.f()}return c}(function(e){var t,n=Object(J.a)(e);try{for(n.s();!(t=n.n()).done;){var c,r=t.value,a=Object(J.a)(r.employees);try{for(a.s();!(c=a.n()).done;)c.value.checked=!1}catch(s){a.e(s)}finally{a.f()}}}catch(s){n.e(s)}finally{n.f()}return e}(t));return A("letter",t.concat(n))}),[]);return Object(r.useEffect)((function(){var t=S("expirationDate");if(!t||Date.now()>t)N.getAllEmployees().then((function(t){var n,c=t.data,r=i(c);e(h(r)),k({employees:r,expirationDate:(n=7,Date.now()+864e5*n)})})).catch((function(e){console.error(e.message)}));else{var n=S("employees");e(h(n))}}),[e,i]),Object(r.useEffect)((function(){l(t),D(t)}),[t]),Object(c.jsx)("div",{style:{display:"flex"},children:t&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(I,{groups:s}),Object(c.jsx)(R,{})]})})},P=function(){return Object(c.jsx)(y.a,{children:Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/employees",children:Object(c.jsx)(L,{})}),Object(c.jsx)(x.a,{path:"/",children:Object(c.jsx)(v,{})})]})})};l.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(o.a,{store:O,children:Object(c.jsx)(P,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.2ea6699e.chunk.js.map